<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Begin Jekyll SEO tag v2.7.1 -->
    <title>QUARKUS - TEMPORAL EXTENSION | quarkus-temporal-extension</title>
    <meta name="generator" content="Jekyll v3.9.0"/>
    <meta property="og:title" content="QUARKUS - TEMPORAL EXTENSION"/>
    <meta property="og:locale" content="en_US"/>
    <meta name="description" content="Temporal workflow engine integration with quarkus"/>
    <meta property="og:description" content="Temporal workflow engine integration with quarkus"/>
    <link rel="canonical" href="https://mostafacs.github.io/quarkus-temporal-extension/"/>
    <meta property="og:url" content="https://mostafacs.github.io/quarkus-temporal-extension/"/>
    <meta property="og:site_name" content="quarkus-temporal-extension"/>
    <meta name="twitter:card" content="summary"/>
    <meta property="twitter:title" content="QUARKUS - TEMPORAL EXTENSION"/>
    <script type="application/ld+json">
        {
            "description": "Temporal workflow engine integration with quarkus",
            "url": "https://mostafacs.github.io/quarkus-temporal-extension/",
            "@type": "WebSite",
            "headline": "QUARKUS - TEMPORAL EXTENSION",
            "name": "quarkus-temporal-extension",
            "@context": "https://schema.org"
        }</script>
    <!-- End Jekyll SEO tag -->

    <link rel="stylesheet"
          href="/quarkus-temporal-extension/assets/css/style.css?v=adb5e49343d315e3f10e3a1e192d9f8dba9ff4ea">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

    <!-- Setup Google Analytics -->

    <meta name="google-site-verification" content="dshzr6nVsRSQF3e7prljcj0DpFQBTJ2q14X3hONlcX4"/>


    <!-- You can set your favicon here -->
    <!-- link rel="shortcut icon" type="image/x-icon" href="/quarkus-temporal-extension/favicon.ico" -->

    <!-- end custom head snippets -->

</head>
<body>
<div class="container-lg px-3 my-5 markdown-body">


    <h1 id="quarkus---temporal-extension">QUARKUS - TEMPORAL EXTENSION</h1>

    <p>With this extension you can easily implement a temporal workflow in your quarkus project.</p>

    <h2 id="how-to-use-">How to use ?</h2>

    <p>1- Add extension dependency to your maven POM file.</p>

    <ul>
        <li>Quarkus 2.x , JDK 11 and Native Image Build Support
            ```xml
        </li>
    </ul>
    <dependency>
        <groupId>com.sellware.quarkus-temporal</groupId>
        <artifactId>temporal-client</artifactId>
        <version>2.0.0</version>
    </dependency>
    <div class="language-plaintext highlighter-rouge">
        <div class="highlight"><pre class="highlight"><code>
* Quarkus 1.x , JDK 8 ( Native image build not supported) 
 ```xml
&lt;dependency&gt;
    &lt;groupId&gt;com.sellware.quarkus-temporal&lt;/groupId&gt;
    &lt;artifactId&gt;temporal-client&lt;/artifactId&gt;
    &lt;version&gt;1.13.1.7&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
        </div>
    </div>

    <p>2- Updated netty-shaded on quarkus-bom</p>
    <div class="language-xml highlighter-rouge">
        <div class="highlight"><pre class="highlight"><code> <span class="nt">&lt;dependencyManagement&gt;</span>
    <span class="nt">&lt;dependencies&gt;</span>
        <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>io.quarkus<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>quarkus-bom<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>${quarkus.version}<span class="nt">&lt;/version&gt;</span>
            <span class="nt">&lt;type&gt;</span>pom<span class="nt">&lt;/type&gt;</span>
            <span class="nt">&lt;scope&gt;</span>import<span class="nt">&lt;/scope&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>
        <span class="c">&lt;!-- Only necessary while quarkus does not bump the netty-all lib. --&gt;</span>
        <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>io.grpc<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>grpc-netty-shaded<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>1.39.0<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>
    <span class="nt">&lt;/dependencies&gt;</span>
<span class="nt">&lt;/dependencyManagement&gt;</span>
</code></pre>
        </div>
    </div>

    <p>3- Add configuration file named <code class="language-plaintext highlighter-rouge">workflow.yml</code> to
        resources folder</p>
    <ul>
        <li>Field <code class="language-plaintext highlighter-rouge">name</code> in annotation <code
                class="language-plaintext highlighter-rouge">@TemporalWorkflow</code> used to load workflow
            configurations
        </li>
        <li>Field <code class="language-plaintext highlighter-rouge">name</code> in annotation <code
                class="language-plaintext highlighter-rouge">@TemporalActivity</code> used to load activities
            configurations
        </li>
    </ul>

    <h4 id="example">Example</h4>
    <div class="language-yml highlighter-rouge">
        <div class="highlight"><pre class="highlight"><code><span class="na">defaults</span><span class="pi">:</span>
  <span class="na">workflowExecutionTimeout</span><span class="pi">:</span> <span class="m">20</span> <span class="c1"># in minutes default is 60 minute if not set</span>
  <span class="na">workflowRunTimeout</span><span class="pi">:</span> <span class="m">15</span> <span class="c1"># in minutes default is 60 minute</span>
  <span class="na">workflowTaskTimeout</span><span class="pi">:</span> <span class="m">14</span> <span class="c1"># in minutes default is 60 minute</span>

  <span class="na">activityScheduleToStartTimeout</span><span class="pi">:</span> <span class="m">60</span> <span
                    class="c1"># in minutes default is 60 minute</span>
  <span class="na">activityScheduleToCloseTimeout</span><span class="pi">:</span> <span class="m">60</span> <span
                    class="c1"># in minutes default is 60 minute</span>
  <span class="na">activityStartToCloseTimeout</span><span class="pi">:</span> <span class="m">60</span> <span
                    class="c1"># in minutes default is 60 minute</span>
  <span class="c1">#heartbeat timeout must be shorter than START_TO_CLOSE timeout</span>
  <span class="na">activityHeartBeatTimeout</span><span class="pi">:</span> <span class="m">5</span> <span class="c1"># in minutes default is 60 minute</span>
  <span class="na">activityRetryInitInterval</span><span class="pi">:</span> <span class="m">1</span> <span class="c1"># in minutes default is 5 minute</span>
  <span class="na">activityRetryMaxInterval</span><span class="pi">:</span> <span class="m">1</span> <span class="c1"># in minutes default is 1 minute if not set</span>
  <span class="na">activityRetryBackOffCoefficient</span><span class="pi">:</span> <span class="m">1.0</span>  <span
                    class="c1"># default is 1.0</span>
  <span class="na">activityRetryMaxAttempts</span><span class="pi">:</span> <span class="m">5</span>  <span class="c1"># default is 1 attempt</span>

<span class="c1"># override defaults per workflow</span>
<span class="na">workflows</span><span class="pi">:</span>
  <span class="na">test</span><span class="pi">:</span>
    <span class="na">executionTimeout</span><span class="pi">:</span> <span class="m">2</span>
    <span class="na">runTimeout</span><span class="pi">:</span> <span class="m">2</span>
    <span class="na">taskTimeout</span><span class="pi">:</span> <span class="m">2</span>
    <span class="na">activities</span><span class="pi">:</span>
      <span class="na">test</span><span class="pi">:</span>
        <span class="na">scheduleTostartTimeout</span><span class="pi">:</span> <span class="m">10</span>
        <span class="na">scheduleTocloseTimeout</span><span class="pi">:</span> <span class="m">10</span>
        <span class="c1">#startTocloseTimeout: 20</span>
        <span class="c1">#heartbeatTimeout: 2</span>
        <span class="c1">#retryInitInterval: 1</span>
        <span class="c1">#retryMaxInterval: 1</span>
        <span class="c1">#retryMaxAttempts: 1</span>
</code></pre>
        </div>
    </div>

    <h3 id="declare-your-temporal-activities">Declare your Temporal Activities:</h3>

    <div class="language-java highlighter-rouge">
        <div class="highlight"><pre class="highlight"><code>    <span class="nd">@ActivityInterface</span>
    <span class="kd">public</span> <span class="kd">interface</span> <span class="nc">TestActivity</span> <span
                    class="o">{</span>
    
        <span class="nc">String</span> <span class="nf">hello</span><span class="o">();</span>
    <span class="o">}</span>
</code></pre>
        </div>
    </div>

    <div class="language-java highlighter-rouge">
        <div class="highlight"><pre class="highlight"><code>    <span class="c1">// name used to get the activity configurations from workflow.yml</span>
    <span class="nd">@TemporalActivity</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span
                    class="s">"test"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestActivityImpl</span> <span
                    class="kd">implements</span> <span class="nc">TestActivity</span> <span class="o">{</span>
    
        <span class="c1">// you can inject your services here.</span>
 
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="nc">String</span> <span class="nf">hello</span><span
                    class="o">()</span> <span class="o">{</span>
            <span class="k">return</span> <span class="s">"I'm hello activity"</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
</code></pre>
        </div>
    </div>

    <h3 id="declare-your-temporal-workflows">Declare your Temporal Workflows:</h3>
    <div class="language-java highlighter-rouge">
        <div class="highlight"><pre class="highlight"><code>    <span class="nd">@WorkflowInterface</span>
    <span class="kd">public</span> <span class="kd">interface</span> <span class="nc">TestWorkflow</span> <span
                    class="o">{</span>
    
        <span class="nd">@WorkflowMethod</span>
        <span class="kt">void</span> <span class="nf">run</span><span class="o">();</span>
    <span class="o">}</span>
</code></pre>
        </div>
    </div>

    <div class="language-java highlighter-rouge">
        <div class="highlight"><pre class="highlight"><code>    <span class="nd">@TemporalWorkflow</span><span
                class="o">(</span><span class="n">queue</span> <span class="o">=</span> <span
                class="s">"testQueue"</span><span class="o">,</span> <span class="n">name</span><span class="o">=</span><span
                class="s">"test"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestWorkflowImpl</span> <span
                    class="kd">implements</span> <span class="nc">TestWorkflow</span> <span class="o">{</span>
    
        <span class="nd">@TemporalActivityStub</span>
        <span class="nc">TestActivity</span> <span class="n">testActivity</span><span class="o">;</span>
    
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span
                    class="o">{</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span
                    class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">testActivity</span><span
                    class="o">.</span><span class="na">hello</span><span class="o">());</span>
            <span class="nc">Workflow</span><span class="o">.</span><span class="na">sleep</span><span
                    class="o">(</span><span class="mi">10000</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span
                    class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Workflow &lt;&lt;1&gt;&gt; completed"</span><span
                    class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
</code></pre>
        </div>
    </div>

    <h3 id="run-your-workflow">Run your workflow:</h3>

    <div class="language-java highlighter-rouge">
        <div class="highlight"><pre class="highlight"><code>
    <span class="nd">@Path</span><span class="o">(</span><span class="s">"/temporal-client"</span><span
                class="o">)</span>
    <span class="nd">@ApplicationScoped</span>
    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">TemporalClientController</span> <span
                class="o">{</span>
    
        <span class="nd">@Inject</span>
        <span class="nc">WorkflowBuilder</span> <span class="n">workflowBuilder</span><span class="o">;</span>
    
        <span class="nd">@GET</span>
        <span class="kd">public</span> <span class="nc">String</span> <span class="nf">hello</span><span
                class="o">()</span> <span class="o">{</span>
            <span class="nc">TestWorkflow</span> <span class="n">testWorkflow</span> <span class="o">=</span> <span
                class="n">workflowBuilder</span><span class="o">.</span><span class="na">build</span><span
                class="o">(</span><span class="nc">TestWorkflow</span><span class="o">.</span><span
                class="na">class</span><span class="o">,</span> <span class="s">"test123"</span><span
                class="o">);</span>
            <span class="nc">WorkflowClient</span><span class="o">.</span><span class="na">execute</span><span
                class="o">(</span><span class="nl">testWorkflow:</span><span class="o">:</span><span
                class="n">run</span><span class="o">);</span>
            <span class="k">return</span> <span class="s">"workfow started"</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>

</code></pre>
        </div>
    </div>


    <div class="footer border-top border-gray-light mt-5 pt-3 text-right text-gray">
        This site is open source. <a href="https://github.com/mostafacs/quarkus-temporal-extension/edit/main/README.md">Improve
        this page</a>.
    </div>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js"
        integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
<script>anchors.add();</script>
</body>
</html>
